<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Focus Remix</title>
    <link rel="stylesheet" href="popup.css" />
  </head>
  <body>
    <div class="popup-container">
      <!-- Tab Navigation -->
      <nav class="tab-nav">
        <button class="tab-btn active" data-tab="remix">âœ¨ Remix</button>
        <button class="tab-btn" data-tab="saved">ðŸ“š Saved <span class="article-count" id="articleCount"></span></button>
      </nav>

      <!-- Remix Tab -->
      <div class="tab-content active" id="remixTab">
        <header class="popup-header">
          <h1>ðŸŽ¯ Focus Remix</h1>
          <span class="status-indicator" id="statusIndicator">Ready</span>
        </header>

        <!-- Active Remixes Section -->
        <section class="active-remixes-section" id="activeRemixesSection" style="display: none;">
          <h2>Active Remixes <span class="active-count" id="activeCount"></span> <a href="#" id="clearStuck" class="clear-stuck-link">Clear stuck</a></h2>
          <div class="active-remixes-list" id="activeRemixesList">
            <!-- Populated by JS -->
          </div>
        </section>

        <section class="ai-badge">
          <span class="ai-icon">âœ¨</span>
          <span>Powered by GPT-5.2</span>
        </section>

        <section class="recipe-selector">
          <h2>Choose a Recipe</h2>
          <div class="recipe-grid" id="recipeGrid">
            <!-- Recipes populated by JS -->
          </div>
        </section>

        <section class="image-toggle-section" id="imageToggleSection">
          <label class="image-toggle">
            <input type="checkbox" id="generateImages" />
            <span class="toggle-slider"></span>
            <span class="toggle-label">
              <span class="toggle-icon">ðŸŽ¨</span>
              Generate AI Images
            </span>
          </label>
          <p class="toggle-hint" id="imageHint">Add diagrams, illustrations, or backgrounds</p>
        </section>

        <section class="custom-prompt-section" id="customPromptSection" style="display: none;">
          <h2>Custom Instructions</h2>
          <textarea 
            id="customPrompt" 
            placeholder="Tell the AI how you want this page transformed...

Examples:
â€¢ Hide all images and focus on text
â€¢ Remove everything except the main article and code blocks
â€¢ Make it look like a minimal documentation page
â€¢ Add a hero image that captures the article theme"
          ></textarea>
        </section>

        <section class="explanation-section" id="explanationSection" style="display: none;">
          <h2>AI Explanation</h2>
          <p id="explanationText"></p>
        </section>

        <footer class="popup-footer">
          <button id="remixBtn" class="primary-btn">
            <span class="btn-icon">âœ¨</span>
            <span class="btn-text">Remix â†’ New Tab</span>
          </button>
        </footer>
      </div>

      <!-- Saved Articles Tab -->
      <div class="tab-content" id="savedTab">
        <header class="saved-header">
          <h2>ðŸ“š Saved Articles</h2>
          <span class="storage-info" id="storageInfo"></span>
        </header>
        
        <div class="articles-list" id="articlesList">
          <!-- Populated by JS -->
        </div>
        
        <div class="empty-state" id="emptyState" style="display: none;">
          <div class="empty-icon">ðŸ“„</div>
          <p>No saved articles yet</p>
          <p class="empty-hint">Use the Remix tab to transform pages</p>
        </div>
      </div>
    </div>

    <script type="module" src="popup.ts"></script>
  </body>
</html>